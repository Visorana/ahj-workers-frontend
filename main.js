!function(){"use strict";new class{constructor(e){this.parentElement=e,this.buttonReload=this.parentElement.querySelector(".news_reload"),this.newsListElement=this.parentElement.querySelector(".news_list"),this.url="https://ahj-workers-backend-x5ki.onrender.com"}init(){this.requestNews(),this.buttonReload.addEventListener("click",(()=>this.requestNews()))}requestNews(){const e=new XMLHttpRequest;e.open("GET",`${this.url}news/`),e.addEventListener("load",(()=>{if(200===e.status){const t=[];for(const s of JSON.parse(e.response))t.push(this.addNews(s));this.reloadNews(t)}else this.disconnect()})),e.addEventListener("error",(()=>this.disconnect())),this.preloader(),e.send()}addNews(e){const t=document.createElement("li");t.classList.add("news_item");const s=document.createElement("div");s.classList.add("news_date");const n=new Date(e.received);s.innerText=n.toLocaleDateString("ru-RU");const i=document.createElement("div");i.classList.add("news_content");const r=document.createElement("div");r.classList.add("news_image");const d=document.createElement("img");d.src=e.image;const a=document.createElement("div");return a.classList.add("news_text"),a.innerText=e.body,r.append(d),i.append(r,a),t.append(s,i),t}reloadNews(e){this.newsListElement.innerHTML="",e.forEach((e=>this.newsListElement.append(e)))}preloader(){this.newsListElement.innerHTML="";const e=document.createElement("li");e.classList.add("news_item"),e.innerHTML='\n      <div class="news_preloader_date"></div>\n      <div class="news_content">\n        <div class="news_preloader_image"></div>\n        <div class="news_preloader_container">\n          <div class="news_preloader_text"></div>\n          <div class="news_preloader_text"></div>\n          <div class="news_preloader_text"></div>\n        </div>\n      </div>';for(let t=0;t<5;t+=1){const t=e.cloneNode(!0);this.newsListElement.append(t)}}disconnect(){const e=document.createElement("div");e.classList.add("news_disconnect"),e.innerHTML="Не удалось загрузить данные<br>Проверьте подключение и обновите страницу",this.parentElement.append(e)}}(document.querySelector("section.news")).init(),(async()=>{try{navigator.serviceWorker&&await navigator.serviceWorker.register("./service-worker.js")}catch(e){console.log(e)}})()}();